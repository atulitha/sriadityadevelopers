<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title> Customer to client Register - Sri Aditya Developers</title>
    <link href="/css/styles.css" rel="stylesheet"/>
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.png"/>
    <script data-search-pseudo-elements defer
            src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.24.1/feather.min.js"
            crossorigin="anonymous"></script>
    <style>
        /* Make card transparent with glass effect */
        .card.shadow-lg {
            background: rgba(255, 255, 255, 0.1) !important; /* Adjust alpha for transparency */
            backdrop-filter: blur(-25px); /* Apply blur effect */
            border: none !important;
        }

        /* Add space below the header */
        .card-header {
            margin-bottom: 30px;
            margin-top: 20px;
        }

        /* Change field background and text color */
        select.form-control {
            background: rgba(240, 240, 240, 0.8); /* Light gray background */
            backdrop-filter: blur(5px); /* Apply blur effect */
            border: 1px; /* Border color matching button */
            border-radius: 8px; /* Rounded corners */
            padding: 8px; /* Padding for better appearance */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }

        select.form-control:focus {
            outline: none; /* Remove default focus outline */
            border-color: #0056b3; /* Change border color on focus */
            box-shadow: 0 0 8px rgba(0, 123, 255, 0.5); /* Glow effect on focus */
        }

        textarea.form-control {
            background-color: rgba(240, 240, 240, 0.8) !important; /* Light gray background */
            color: #333 !important; /* Dark text color */
            backdrop-filter: blur(5px); /* Apply blur effect */
        }

        /* Default outline color */
        input.form-control,
        select.form-control,
        textarea.form-control {
            border: 2px solid white; /* Default border color */
            border-radius: 8px; /* Rounded corners */
        }

        /* Outline color on focus */
        input.form-control:focus,
        select.form-control:focus,
        textarea.form-control:focus {
            border-color: white; /* Green border color on focus */
            box-shadow: 0 0 8px rgba(40, 167, 69, 0.5); /* Glow effect */
            outline: none; /* Remove default outline */
        }

        /* Glass effect for select options */

        .form-left {
            display: flex;
            justify-content: flex-end; /* Aligns content to the right */
            align-items: flex-start;
            margin-top: 10px;
        }

        @media (max-width: 991.98px) {
            .form-left {
                justify-content: center;
            }
        }

        /* Change text color to button color */
        .card-body {
            color: white !important; /* Button color */
        }

        .card-header {
            color: white !important; /* Button color */
        }

        .card-footer {
            color: #323f52 !important; /* Button color */
        }

        label {
            color: #323f52 !important; /* Button color */
        }

        textarea.form-control {
            color: blue !important; /* Button color */
        }

        /* Set text input color to black */
        input.form-control,
        textarea.form-control {
            color: black !important; /* Black text input color */
            background-color: rgba(255, 255, 255, 0.4) !important; /* Adjust alpha for field transparency */
            backdrop-filter: blur(5px); /* Apply blur effect */
        }

    </style>
</head>
<body class="nav-fixed">
<nav class="topnav navbar navbar-expand shadow navbar-light bg-transparent" id="sidenavAccordion"
     style="position: relative;">
    <a class="navbar-brand d-none d-sm-block" href="index.html"> Sri Aditya Developers</a><img class="dropdown-user-img"
                                                                                               src="/static/assets/img/siradithya.jpg"
                                                                                               style="width: 60px;height:58px;"/>
    <button class="btn btn-icon btn-transparent-dark order-1 order-lg-0 mr-lg-2" id="sidebarToogle" href="#"><i
            data-feather="menu"></i></button>
    <form class="form-inline mr-auto d-none d-lg-block"><input class="form-control form-control-solid mr-sm-2"
                                                               type="search" placeholder="Search" aria-label="Search"/>
    </form>
    <ul class="navbar-nav align-items-center ml-auto">
        <li class="nav-item dropdown no-caret mr-3">
            <a class="nav-link dropdown-toggle" id="navbarDropdownDocs" href="javascript:void(0);" role="button"
               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
            >
                <div class="d-inline d-md-none font-weight-500">Docs</div>
                <div class="d-none d-md-inline font-weight-500">Documentation</div>
                <i class="fas fa-chevron-right dropdown-arrow"></i
                ></a>
            <div class="dropdown-menu dropdown-menu-right py-0 o-hidden mr-n15 mr-lg-0 animated--fade-in-up"
                 aria-labelledby="navbarDropdownDocs">
                <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-admin-pro" target="_blank"
                >
                    <div class="icon-stack bg-primary-soft text-primary mr-4"><i data-feather="book"></i></div>
                    <div>
                        <div class="small text-gray-500">Documentation</div>
                        Usage instructions and reference
                    </div>
                </a>
                <div class="dropdown-divider m-0"></div>
                <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-admin-pro/components"
                   target="_blank">
                    <div class="icon-stack bg-primary-soft text-primary mr-4"><i data-feather="code"></i></div>
                    <div>
                        <div class="small text-gray-500">Components</div>
                        Code snippets and reference
                    </div>
                </a>
                <div class="dropdown-divider m-0"></div>
                <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-admin-pro/changelog"
                   target="_blank"
                >
                    <div class="icon-stack bg-primary-soft text-primary mr-4"><i data-feather="file-text"></i></div>
                    <div>
                        <div class="small text-gray-500">Changelog</div>
                        Updates and changes
                    </div>
                </a
                >
            </div>
        </li>
        <li class="nav-item dropdown no-caret mr-3 dropdown-notifications">
            <a class="btn btn-icon btn-transparent-dark dropdown-toggle" id="navbarDropdownAlerts"
               href="javascript:void(0);" role="button" data-toggle="dropdown" aria-haspopup="true"
               aria-expanded="false"><i data-feather="bell"></i></a>
            <div class="dropdown-menu dropdown-menu-right border-0 shadow animated--fade-in-up"
                 aria-labelledby="navbarDropdownAlerts">
                <h6 class="dropdown-header dropdown-notifications-header"><i class="mr-2" data-feather="bell"></i>Alerts
                    Center</h6>
                <a class="dropdown-item dropdown-notifications-item" href="#!"
                >
                    <div class="dropdown-notifications-item-icon bg-warning"><i data-feather="activity"></i></div>
                    <div class="dropdown-notifications-item-content">
                        <div class="dropdown-notifications-item-content-details">December 29, 2019</div>
                        <div class="dropdown-notifications-item-content-text">This is an alert message. It's nothing
                            serious, but it requires your attention.
                        </div>
                    </div>
                </a
                ><a class="dropdown-item dropdown-notifications-item" href="#!"
            >
                <div class="dropdown-notifications-item-icon bg-info"><i data-feather="bar-chart"></i></div>
                <div class="dropdown-notifications-item-content">
                    <div class="dropdown-notifications-item-content-details">December 22, 2019</div>
                    <div class="dropdown-notifications-item-content-text">A new monthly report is ready. Click here to
                        view!
                    </div>
                </div>
            </a
            ><a class="dropdown-item dropdown-notifications-item" href="#!">
                <div class="dropdown-notifications-item-icon bg-danger"><i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="dropdown-notifications-item-content">
                    <div class="dropdown-notifications-item-content-details">December 8, 2019</div>
                    <div class="dropdown-notifications-item-content-text">Critical system failure, systems shutting
                        down.
                    </div>
                </div>
            </a>
                <a class="dropdown-item dropdown-notifications-item" href="#!">
                    <div class="dropdown-notifications-item-icon bg-success"><i data-feather="user-plus"></i></div>
                    <div class="dropdown-notifications-item-content">
                        <div class="dropdown-notifications-item-content-details">December 2, 2019</div>
                        <div class="dropdown-notifications-item-content-text">New user request. Woody has requested
                            access
                            to the organization.
                        </div>
                    </div>
                </a
                ><a class="dropdown-item dropdown-notifications-footer" href="#!">View All Alerts</a>
            </div>
        </li>
        <li class="nav-item dropdown no-caret mr-3 dropdown-notifications">
            <a class="btn btn-icon btn-transparent-dark dropdown-toggle" id="navbarDropdownMessages"
               href="javascript:void(0);" role="button" data-toggle="dropdown" aria-haspopup="true"
               aria-expanded="false"><i data-feather="mail"></i></a>
            <div class="dropdown-menu dropdown-menu-right border-0 shadow animated--fade-in-up"
                 aria-labelledby="navbarDropdownMessages">
                <h6 class="dropdown-header dropdown-notifications-header"><i class="mr-2" data-feather="mail"></i>Message
                    Center</h6>
                <a class="dropdown-item dropdown-notifications-item" href="#!"
                ><img class="dropdown-notifications-item-img" src="/assets/img/siradithya.jpg"/>
                    <div class="dropdown-notifications-item-content">
                        <div class="dropdown-notifications-item-content-text">Lorem ipsum dolor sit amet, consectetur
                            adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
                            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                            fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
                            officia deserunt mollit anim id est laborum.
                        </div>
                        <div class="dropdown-notifications-item-content-details">Emily Fowler · 58m</div>
                    </div>
                </a
                ><a class="dropdown-item dropdown-notifications-item" href="#!"
            ><img class="dropdown-notifications-item-img" src="https://source.unsplash.com/4ytMf8MgJlY/60x60"/>
                <div class="dropdown-notifications-item-content">
                    <div class="dropdown-notifications-item-content-text">Lorem ipsum dolor sit amet, consectetur
                        adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
                        minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
                        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
                        mollit anim id est laborum.
                    </div>
                    <div class="dropdown-notifications-item-content-details">Diane Chambers · 2d</div>
                </div>
            </a
            ><a class="dropdown-item dropdown-notifications-footer" href="#!">Read All Messages</a>
            </div>
        </li>
        <li class="nav-item dropdown no-caret mr-3 dropdown-user">
            <a class="btn btn-icon btn-transparent-dark dropdown-toggle" id="navbarDropdownUserImage"
               href="javascript:void(0);" role="button" data-toggle="dropdown" aria-haspopup="true"
               aria-expanded="false"><img class="img-fluid" src="/assets/img/siradithya.jpg"/></a>
            <div class="dropdown-menu dropdown-menu-right border-0 shadow animated--fade-in-up"
                 aria-labelledby="navbarDropdownUserImage">
                <h6 class="dropdown-header d-flex align-items-center">
                    <img class="dropdown-user-img" src="/assets/img/siradithya.jpg"/>
                    <div class="dropdown-user-details">
                        <div class="dropdown-user-details-name">Valerie Luna</div>
                        <div class="dropdown-user-details-email">vluna@aol.com</div>
                    </div>
                </h6>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#!"
                >
                    <div class="dropdown-item-icon"><i data-feather="settings"></i></div>
                    Account</a>
                <a class="dropdown-item" href="#!">
                    <div class="dropdown-item-icon"><i data-feather="log-out"></i></div>
                    Logout</a>
            </div>
        </li>
    </ul>
</nav>
<section style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0;">
    <video autoplay muted playsinline
           style="position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; object-fit: cover; z-index: 1;">
        <source src="/assets/img/aditya.webm" type="video/webm">
    </video>
</section>
<div id="layoutAuthentication" style="position: relative; z-index: 2;">
    <div id="layoutAuthentication_content">
        <main>
            <div class="container-fluid form-left">
                <div class="row w-100">
                    <div class="col-lg-6 col-md-8 col-sm-10">
                        <div class="card shadow-lg border-0 rounded-lg mt-5">
                            <div class="card-header justify-content-center">
                                <h2 style="font-weight:800; color:#323f52;">Customer to Client Conversion Form</h2>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputFirstName">First Name</label>
                                                <input class="form-control py-4"
                                                       id="inputFirstName"
                                                       type="text"
                                                       placeholder="Enter first name"
                                                       pattern="^[A-Za-z]+$"
                                                       inputmode="text"
                                                       maxlength="32"
                                                       required
                                                       title="Only letters are allowed"/>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputLastName">Last Name</label>
                                                <input class="form-control py-4"
                                                       id="inputLastName" type="text"
                                                       placeholder="Enter last name"
                                                       pattern="^[A-Za-z]+$"
                                                       inputmode="text"
                                                       maxlength="32"
                                                       required
                                                       title="Only letters are allowed"/>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Email Address -->
                                    <div class="form-group">
                                        <label class="small mb-1" for="inputEmailAddress">
                                            Email <span class="text-danger">*</span>
                                        </label>
                                        <input class="form-control py-4" id="inputEmailAddress" name="email"
                                               type="email"
                                               placeholder="Enter email address"
                                               pattern="^[a-zA-Z0-9._%+\-]+@(gmail|outlook|hotmail|yahoo)\.com$"
                                               required
                                               autocomplete="off"/>
                                        <div class="invalid-feedback">
                                            Please enter a valid email address (Gmail, Outlook, Hotmail, or Yahoo).
                                        </div>
                                    </div>
                                    <!--Password and Confirm Password -->
                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputPassword">Password</label>
                                                <input class="form-control py-4"
                                                       id="inputPassword"
                                                       type="password"
                                                       placeholder="Enter password"
                                                       pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,24}$"
                                                       required
                                                       title="Password must be 8-24 characters, include letters, numbers, and special symbols."/>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="small mb-1" for="inputConfirmPassword">Confirm
                                                    Password</label>
                                                <input class="form-control py-4" id="inputConfirmPassword"
                                                       type="password" placeholder="Confirm password"/>
                                                <div id="confirmPasswordError" style="display:none;color:red;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <!-- Date of Birth -->
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="small mb-1" for="dob">Date of Birth</label>
                                                <input class="form-control py-4" id="dob" type="date" required/>
                                            </div>
                                        </div>
                                        <!-- Photo Upload and Preview (already updated) -->
                                        <div class="col-md-7">
                                            <div class="form-group photo-upload-group"
                                                 style="position: relative; height: 400px; min-width: 180px; min-height: 300px;border: 1px solid rgba(255,255,255,0.18); border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.08); padding: 32px 14px 32px 14px; margin-top: 0; display: flex; flex-direction: column; justify-content: flex-end;">
                                                <label class="small mb-1" for="photo_file" style="font-size: 1.0rem; color: black;">
                                                    Upload Photo <span class="text-danger">*</span>
                                                </label>
                                                <div class="photo-preview-container"
                                                     style="position: relative; width: 100%; display: flex; justify-content: center; align-items: center; height: 220px; margin-bottom: 18px;">
                                                    <img id="photo_preview" src="/assets/img/profile-pic.svg"
                                                         alt="Photo Preview"
                                                         class="photo-preview-img"
                                                         style="width: 160px; height: 210px; object-fit: cover; border-radius: 5px; background: transparent; border: 1px solid #ccc; box-shadow: 0 2px 4px rgba(0,0,0,0.04); margin-top: 20px; margin-bottom: 8px;"/>

                                                </div>
                                                <input class="form-control-file" id="photo_file" name="photo_file"
                                                       type="file" accept="image/png, image/jpeg"
                                                       aria-describedby="photoHelp" style="margin-top: 18px;"/>
                                                <small id="photoHelp" style="color:black;">Max size: 2MB. JPEG
                                                    or
                                                    PNG only.</small>
                                                <div id="photoError" class="text-danger"
                                                     style="display: none; font-size: 0.95em; margin-top: 4px;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Gender -->
                                    <div class="form-row py-2">
                                        <div class="col-md-8 px-3">
                                            <div class="form-group mb-0">
                                                <label class="small mb-1 font-weight-bold" for="gender">
                                                    Gender <span class="text-danger">*</span>
                                                </label>
                                                <select class="form-control" id="gender" name="gender" required>
                                                    <option value="">Select Gender</option>
                                                    <option value="Male">Male</option>
                                                    <option value="Female">Female</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="small mb-1" for="adhar">Aadhaar
                                                number</label>
                                            <input class="form-control"
                                                   id="adhar"
                                                   type="tel"
                                                   maxlength="14" placeholder="Aadhaar number"
                                                   pattern="\d{4} \d{4} \d{4}"
                                                   required
                                                   autocomplete="off"/>
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <div class="form-group"><label class="small mb-1"
                                                                       for="pan">pan</label><input
                                                class="form-control py-4" id="pan" type="text"
                                                maxlength="16" placeholder="pan number" required/></div>
                                    </div>
                                    <!-- Aadhaar Upload -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="medium mb-1" for="aadhaar_file">Upload Aadhaar (PDF
                                                only)</label>
                                            <input class="form-control py-4" id="aadhaar_file"
                                                   name="aadhaar_file"
                                                   type="file" accept="application/pdf" style="height: 65px;"
                                                   required/>
                                        </div>
                                    </div>
                                    <!-- PAN Upload -->
                                    <div class="col-md-7">
                                        <div class="form-group">
                                            <label class="small mb-1" for="pan_file">Upload PAN (PDF
                                                only)</label>
                                            <input class="form-control py-4" id="pan_file" name="pan_file"
                                                   type="file" accept="application/pdf" style="height: 65px;"
                                                   required/>
                                        </div>
                                    </div>
                                    <div class="form-group mt-4 mb-0 text-center">
                                        <button type="submit" class="btn btn-primary">Create Account</button>
                                    </div>
                                </form>
                            </div>
                            <div class="card-footer text-center">
                                <div class="small"><a href="login-basic.html"></a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div id="layoutAuthentication_footer">
        <footer class="footer mt-auto footer-dark">
            <div class="container-fluid">
                <div class="row" style="color:blue;">
                    <div class="col-md-6 small">Copyright &copy; Sri Aditya Developers 2025</div>
                    <div class="col-md-6 text-md-right small">
                        <a href="#!">Privacy Policy</a>
                        &middot;
                        <a href="#!">Terms &amp; Conditions</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
<script src="/js/scripts.js"></script>
<script src="/js/validate.js"></script>
<script>
    document.querySelector('form').addEventListener('submit', async function (e) {
            e.preventDefault();

            const form = e.target;
            const formData = new FormData();

            formData.append('first_name', document.getElementById('inputFirstName').value);
            formData.append('last_name', document.getElementById('inputLastName').value);
            formData.append('email', document.getElementById('inputEmailAddress').value);
            formData.append('password', document.getElementById('inputPassword').value);
            formData.append('confirm_password', document.getElementById('inputConfirmPassword').value);
            formData.append('dob', document.getElementById('dob').value);
            formData.append('gender', document.getElementById('gender').value);
            formData.append('designation', document.getElementById('designation').value);
            formData.append('reference_agent', document.getElementById('Reference_agent').value);
            formData.append('agent_team', document.getElementById('Agent_team').value);
            formData.append('aadhaar', document.getElementById('adhar').value);
            formData.append('pan', document.getElementById('pan').value);

            // Append files
            const photoFile = document.getElementById('photo_file').files[0];
            if (photoFile) formData.append('photo_file', photoFile);

            const aadhaarFile = document.getElementById('aadhaar_file').files[0];
            if (aadhaarFile) formData.append('aadhaar_file', aadhaarFile);

            const panFile = document.getElementById('pan_file').files[0];
            if (panFile) formData.append('pan_file', panFile);

            const response = await fetch('/register-agent', {
                method: 'POST',
                body: formData
                // No need to set Content-Type; browser will set it to multipart/form-data
            });

            let responseText = '';
            try {
                responseText = await response.text();
            } catch (e) {
                responseText = '';
            }

            if (response.ok && responseText.includes('Registration successful!')) {
                alert('Registration successful!');
            } else {
                let errorMsg = 'Registration failed.\n';
                try {
                    // Try to parse as JSON if possible
                    const data = JSON.parse(responseText);
                    if (data && (data.error || data.message)) {
                        errorMsg += ' ' + (data.error || data.message);
                    } else {
                        errorMsg += ' (No error message from server)';
                    }
                } catch (e) {
                    errorMsg += ` (Status: ${response.status})\n${responseText}`;
                }
                alert(errorMsg);
            }
        }
    ); // <-- fixed parenthesis

    // Populate Designation dropdown
    fetch('/register-agent?key=Designation')
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.json();
        })
        .then(data => {
            if (data.status === 'ok' && Array.isArray(data.Designation)) {
                const select = document.getElementById('designation');
                select.innerHTML = '<option value="">Select Designation</option>';
                data.Designation.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id || item.name;
                    option.textContent = item.name;
                    select.appendChild(option);
                });
            }
        })
        .catch(error => {
            console.error('Fetch error:', error);
        });

    // Populate Agent team dropdown
    fetch('/register-agent?key=teams')
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.json();
        })
        .then(data => {
            if (data.status === 'ok' && Array.isArray(data.teams)) {
                const select = document.getElementById('Agent_team');
                select.innerHTML = '<option value="">Select Agent Team</option>';
                data.teams.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id || item.name;
                    option.textContent = item.name;
                    select.appendChild(option);
                });
            }
        })
        .catch(error => {
            console.error('Fetch error:', error);
        });

    // Photo upload preview and validation (match client)
    const photoInput = document.getElementById('photo_file');
    const photoPreview = document.getElementById('photo_preview');
    const removePhotoBtn = document.getElementById('remove_photo');
    const photoError = document.getElementById('photoError');
    const defaultPhoto = 'assets/img/profile-pic.svg';

    photoInput.addEventListener('change', function () {
        photoError.style.display = 'none';
        const file = this.files[0];
        if (!file) {
            photoPreview.src = defaultPhoto;
            removePhotoBtn.style.display = 'none';
            return;
        }
        if (!['image/jpeg', 'image/png'].includes(file.type)) {
            photoError.textContent = 'Only JPEG or PNG images are allowed.';
            photoError.style.display = 'block';
            this.value = '';
            photoPreview.src = defaultPhoto;
            removePhotoBtn.style.display = 'none';
            return;
        }
        if (file.size > 2 * 1024 * 1024) {
            photoError.textContent = 'File size must be less than 2MB.';
            photoError.style.display = 'block';
            this.value = '';
            photoPreview.src = defaultPhoto;
            removePhotoBtn.style.display = 'none';
            return;
        }
        const reader = new FileReader();
        reader.onload = function (e) {
            photoPreview.src = e.target.result;
            removePhotoBtn.style.display = 'block';
        };
        reader.readAsDataURL(file);
    });

    removePhotoBtn.addEventListener('click', function () {
        photoInput.value = '';
        photoPreview.src = defaultPhoto;
        removePhotoBtn.style.display = 'none';
        photoError.style.display = 'none';
    });
</script>
</body>
</html>